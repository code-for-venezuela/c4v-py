<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="canonical" href="https://microscope.com/development/architecture/">
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Architecture - Microscope</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../../css/theme.css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Architecture";
    var mkdocs_page_input_path = "development/architecture.md";
    var mkdocs_page_url = "/development/architecture/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> Microscope</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Using Microscope</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../usage/microscope-as-a-library/">Microscope as a Library</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../usage/primary-components/">Primary Components</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../usage/microscope-as-cli/">Microscope as a command line tool</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Development</span></p>
                <ul class="current">
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">Architecture</a>
    <ul class="current">
    </ul>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../creating-a-scraper/">Creating a Scraper</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../creating-a-crawler/">Creating a Crawler</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../creating-a-persistency-manager/">Creating a Persistency Manager</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">Microscope</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Development &raquo;</li>
        
      
    
    <li>Architecture</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  
  <hr/>
</div>

          <div role="main">
            <div class="section">
              
                <h1 id="architecture-components">Architecture &amp; components</h1>
<p>The Microscope library is compound by components that can be summarized as:    </p>
<ul>
<li><strong>Scraper</strong>: Will scrape data from <strong>known</strong> urls for specific websites, <strong>not every website might be scrapable</strong>, 
returning <code>ScrapedData</code> instances, this is the scheme for the data expected from a page</li>
<li><strong>Crawler</strong>: Will crawl new urls from specific sources, this data should be fed to the scraper at some point</li>
<li><strong>Persistency Manager</strong>: Will store data scraped by the scraper in some persistent storage, an SQLite-based
manager is provided by default</li>
<li><strong>Classifier</strong>: Classifies a <code>ScrapedData</code> instance telling if it is a public service problem or not.</li>
<li><strong>Experiment</strong>: This class controls an experiment run, it's useful to manage logging and results for experiments. Also, 
it makes possible for every experiment to be ran in more or less the same way, making it easier to use for new comers.</li>
<li><strong>ExperimentFSManager</strong>: Simple class controlling how to experiment's filesystems are stored, enabling an unified filesystem 
for every experiment. You can implement a new object with the same interface if you want to provide an alternative method 
experiment's storage</li>
</ul>
<p align="center">
  <img src= "../../img/microscope_architecture.png">
</p>

<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The <strong>classifier</strong> should be more specific in the future, it should be able not only to differentiate between news talking 
about public services or not, but also the kind of problem itself</p>
</div>
<hr />
<h1 id="scraper">Scraper</h1>
<p>The <strong>Scraper</strong> component is just a <strong>single function</strong> that receives a list of urls to scrape and manages to select
the right <strong>scraper object</strong> for such url (based on its domain) or <strong>raise an error</strong> if it's not able to find any <strong>matching scraper</strong>.</p>
<h2 id="example-usage">Example usage</h2>
<p>The next examples will show you how to use the scraper to scrape a list of urls, handle a possible non-valid url
and filter out urls that may not be scrapable.</p>
<h3 id="scraping-multiple-urls-with-the-manager-object">Scraping multiple urls with the Manager object</h3>
<p>The easiest way to scrape is using the manager object as follows:</p>
<pre><code>import c4v.microscope as ms

# Creates the default manager
m = ms.Manager.from_default()

urls = [
    &quot;https://primicia.com.ve/mas/servicios/siete-trucos-caseros-para-limpiar-la-plancha-de-ropa/&quot;,
    &quot;https://primicia.com.ve/guayana/ciudad/suenan-con-urbanismo-en-core-8/&quot;
]

# Output may depend on your internet connection and page availability
for result in m.scrape(urls):
    print(result.pretty_repr(max_content_len = 100))

</code></pre>
<h3 id="scraping-a-single-url">Scraping a single url</h3>
<pre><code>import c4v.microscope as ms

m = ms.Manager.from_default()

url = &quot;https://primicia.com.ve/mas/servicios/siete-trucos-caseros-para-limpiar-la-plancha-de-ropa/&quot;

# Output may depend on your internet connection and page availability
result = m.scrape(url)
print(result.pretty_repr(max_content_len = 100))
</code></pre>
<h3 id="removing-non-scrapable-urls">Removing non-scrapable urls</h3>
<p>Here we can see how to separate scrapable urls from non-scrapable ones. It may be helpful to know which urls can be processed</p>
<pre><code>import c4v.microscope as ms

m = ms.Manager.from_default()

urls = [
    &quot;https://primicia.com.ve&quot;,
    &quot;https://elpitazo.net&quot;,
    &quot;https://supernotscrapable.com&quot;
]

assert m.split_non_scrapable(urls) == (urls[:2], urls[2:])
</code></pre>
<h3 id="todo">TODO</h3>
<p>add more useful examples</p>
<h2 id="creation">Creation</h2>
<p>You can create a new scraper in order to support scraping for new sites. More details about this in <a href="../creating-a-scraper/">"creating a scraper"</a></p>
<h1 id="crawler">Crawler</h1>
<p>TODO</p>
<h2 id="creation_1">Creation</h2>
<p>You can create a new crawler in order to support exploring new urls for new sites. More details about this in <a href="../creating-a-crawler/">"creating a crawler"</a></p>
<h1 id="persistency-manager">Persistency Manager</h1>
<p>TODO</p>
<h2 id="creation_2">Creation</h2>
<p>You can create a new <code>Persistency Manager</code> object in order to support new ways of storing data. More details about this in <a href="../creating-a-persistency-manager/">"creating a persistency manager"</a></p>
<h1 id="experiment">Experiment</h1>
<p>TODO</p>
<h1 id="experimentfsmanager">ExperimentFSManager</h1>
<p>TODO</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../creating-a-scraper/" class="btn btn-neutral float-right" title="Creating a Scraper">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../../usage/microscope-as-cli/" class="btn btn-neutral" title="Microscope as a command line tool"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../../usage/microscope-as-cli/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../creating-a-scraper/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme_extra.js" defer></script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
